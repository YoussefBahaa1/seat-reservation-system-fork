server {
    # nginx listens on port 443 (standard tls) and need ssl.
    listen 443 ssl;
    # only request regarding server_name are applied to this block.
    server_name jus-srv-test30.justiz.sachsen.de;

    # the public cert file (pk)
    # ssl_certificate    /etc/ssl/private/srv_neu.crt;
    ssl_certificate    /etc/ssl/private/jus-srv-test30.justiz.sachsen.de.crt;
    # The private key that belongs to the cert file.
    #ssl_certificate_key /etc/ssl/private/srv_neu.key;
    ssl_certificate_key /etc/ssl/private/jus-srv-test30.justiz.sachsen.de.key;

    # Directory where nginx looks for files.
    root /usr/share/nginx/html;
    # Serve index.html
    index index.html;

    # Belongs to al requests.
    location / {
        # Try to serve requested file if it not exist, redirect to index.html
        # Important for single page frameworks like react/angular. Prevent 404.
        try_files $uri /index.html;
    }

    # Always revalidate SPA shell so clients pick up the newest bundle references after deploy.
    location = /index.html {
        add_header Cache-Control "no-cache, no-store, must-revalidate";
        expires -1;
    }

    location = /asset-manifest.json {
        add_header Cache-Control "no-cache, no-store, must-revalidate";
        expires -1;
    }

    # To help perfomance we say to cache for 1y and dont need any logging. 
    location /static/ {
        expires 1y;
        access_log off;
    }
}
